---
import MarketingLayout from '@/layouts/MarketingLayout.astro';
import Hero from '@/components/sections/marketing/Hero.astro';
import StorySection from '@/components/sections/marketing/StorySection.astro';
import FeaturesSection from '@/components/sections/marketing/FeaturesSection.astro';
import BentoGrid from '@/components/sections/marketing/BentoGrid.astro';
import PricingTable from '@/components/sections/pricing/PricingTable.astro';
import CTA from '@/components/sections/marketing/CTA.astro';
import { useTranslations } from '@/i18n/utils';

interface Props {
  lang: 'es' | 'en';
}

const { lang } = Astro.props;
const t = useTranslations(lang);

const features = [
  {
    icon: 'lucide:zap',
    title: t('feature.zap.title'),
    description: t('feature.zap.desc'),
  },
  {
    icon: 'lucide:shield-check',
    title: t('feature.shield.title'),
    description: t('feature.shield.desc'),
  },
  {
    icon: 'lucide:cpu',
    title: t('feature.cpu.title'),
    description: t('feature.cpu.desc'),
  },
  {
    icon: 'lucide:layers',
    title: t('feature.layers.title'),
    description: t('feature.layers.desc'),
  },
  {
    icon: 'lucide:server',
    title: t('feature.server.title'),
    description: t('feature.server.desc'),
  },
  {
    icon: 'lucide:code-2',
    title: t('feature.code.title'),
    description: t('feature.code.desc'),
  },
];

const techStack = [
  {
    title: t('tech.go.title'),
    description: t('tech.go.desc'),
    icon: 'simple-icons:go',
    size: 'large' as const,
    accent: 'blue' as const,
    href: 'https://go.dev',
  },
  {
    title: t('tech.firecracker.title'),
    description: t('tech.firecracker.desc'),
    icon: 'simple-icons:amazonaws',
    accent: 'orange' as const,
    href: 'https://firecracker-microvm.github.io/',
  },
  {
    title: t('tech.postgres.title'),
    description: t('tech.postgres.desc'),
    icon: 'simple-icons:postgresql',
    accent: 'blue' as const,
    href: 'https://www.postgresql.org/',
  },
  {
    title: t('tech.redis.title'),
    description: t('tech.redis.desc'),
    icon: 'simple-icons:redis',
    size: 'medium' as const,
    accent: 'red' as const,
    href: 'https://redis.io/',
  },
];

const pricingPlans = [
  {
    name: 'Developer',
    monthlyPrice: 0,
    description: t('plan.dev.desc'),
    features: lang === 'es' ? ['Hasta 5 microVMs', 'API REST básica', 'Soporte comunitario', 'Despliegue local (Docker)'] : ['Up to 5 microVMs', 'Basic REST API', 'Community Support', 'Local Deployment (Docker)'],
    cta: { label: t('pricing.download'), href: 'https://github.com/spluca/mikrom' },
  },
  {
    name: 'Pro',
    monthlyPrice: 29,
    description: t('plan.pro.desc'),
    features: lang === 'es' ? [
      'MicroVMs ilimitadas*',
      'Soporte prioritario',
      'Panel de control avanzado',
      'Métricas en tiempo real',
    ] : [
      'Unlimited MicroVMs*',
      'Priority Support',
      'Advanced Control Panel',
      'Real-time Metrics',
    ],
    highlighted: true,
    cta: { label: t('pricing.startTrial'), href: '/register' },
  },
  {
    name: 'Enterprise',
    monthlyPrice: null,
    customPrice: t('pricing.contact'),
    description: t('plan.ent.desc'),
    features: lang === 'es' ? ['Despliegue On-Premise', 'SLA garantizado', 'Soporte 24/7', 'Auditoría de seguridad'] : ['On-Premise Deployment', 'Guaranteed SLA', '24/7 Support', 'Security Audit'],
    cta: { label: t('pricing.contactVentas'), href: '/contact' },
  },
];
---

<MarketingLayout
  title={t('hero.title')}
  description={t('hero.subtitle')}
>
  <Hero
    title={t('hero.title')}
    subtitle={t('hero.subtitle')}
    primaryCTA={{ label: t('hero.primaryCTA'), href: 'https://github.com/spluca/mikrom' }}
    secondaryCTA={{ label: t('hero.secondaryCTA'), href: '/docs' }}
    badge={t('hero.badge')}
  />

  <StorySection image="/images/story-bg.png" />

  <FeaturesSection
    title={t('features.title')}
    subtitle={t('features.subtitle')}
    features={features}
    background="surface"
  />

  <BentoGrid
    title={t('bento.title')}
    subtitle={t('bento.subtitle')}
    items={techStack}
    background="default"
  />

  <PricingTable
    title={t('pricing.title')}
    subtitle={t('pricing.subtitle')}
    plans={pricingPlans}
    background="surface"
  />

  <CTA
    title={t('cta.title')}
    description={t('cta.desc')}
    action={{ label: t('cta.action'), href: '/get-started' }}
  />
</MarketingLayout>
