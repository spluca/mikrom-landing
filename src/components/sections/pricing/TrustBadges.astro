---
/**
 * TrustBadges - Trust indicators and guarantee section
 *
 * @description
 * Displays trust-building elements like money-back guarantee,
 * security certifications, and payment method logos. Helps reduce
 * purchase anxiety and increase conversion.
 *
 * @example Basic usage
 * ```astro
 * <TrustBadges
 *   guarantee={{
 *     title: "30-day money-back guarantee",
 *     description: "Try risk-free. If you're not satisfied, get a full refund."
 *   }}
 * />
 * ```
 *
 * @example With custom payment methods
 * ```astro
 * <TrustBadges
 *   guarantee={{
 *     title: "30-day money-back guarantee",
 *     description: "No questions asked."
 *   }}
 *   badges={[
 *     { icon: "lucide:shield-check", label: "SOC 2 Certified" },
 *     { icon: "lucide:lock", label: "256-bit SSL" },
 *   ]}
 *   paymentMethods={[
 *     { name: "Visa", logo: "/images/payments/visa.svg" },
 *     { name: "Mastercard", logo: "/images/payments/mastercard.svg" },
 *   ]}
 * />
 * ```
 */

import { Icon } from 'astro-icon/components';

interface Guarantee {
  /** Guarantee headline */
  title: string;
  /** Guarantee description */
  description: string;
  /** Custom icon (default: lucide:shield-check) */
  icon?: string;
}

interface Badge {
  /** Icon name from Lucide */
  icon: string;
  /** Badge label text */
  label: string;
}

interface PaymentMethod {
  /** Payment method name */
  name: string;
  /** Path to logo image (relative to /public) */
  logo: string;
}

interface Props {
  /** Optional section title */
  title?: string;
  /** Money-back guarantee config */
  guarantee?: Guarantee;
  /** Security/compliance badges */
  badges?: Badge[];
  /** Payment methods with logo images */
  paymentMethods?: PaymentMethod[];
  /** Visual variant */
  variant?: 'default' | 'compact' | 'centered';
  /** Section background style */
  background?: 'default' | 'muted' | 'accent';
}

const {
  title,
  guarantee,
  badges = [
    { icon: 'lucide:shield-check', label: 'Secure checkout' },
    { icon: 'lucide:lock', label: '256-bit SSL encryption' },
    { icon: 'lucide:credit-card', label: 'PCI compliant' },
  ],
  paymentMethods = [
    { name: 'Visa', logo: '/images/payments/visa.svg' },
    { name: 'Mastercard', logo: '/images/payments/mastercard.svg' },
    { name: 'Amex', logo: '/images/payments/amex.svg' },
    { name: 'PayPal', logo: '/images/payments/paypal.svg' },
  ],
  variant = 'default',
  background = 'default',
} = Astro.props;

const bgClass = {
  default: 'bg-background',
  muted: 'bg-surface',
  accent: 'bg-primary/5',
}[background];
---

<section class:list={[variant === 'compact' ? 'py-8' : 'py-section', bgClass]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    {title && <h2 class="text-2xl font-bold text-text text-center mb-8">{title}</h2>}

    <div
      class:list={[
        'rounded-lg border border-border bg-surface p-8',
        variant === 'centered' ? 'text-center' : '',
      ]}
    >
      <div
        class:list={[
          'grid gap-8',
          guarantee && badges.length > 0
            ? 'md:grid-cols-2 lg:grid-cols-3'
            : guarantee
              ? 'md:grid-cols-1 max-w-2xl mx-auto'
              : 'md:grid-cols-3',
        ]}
      >
        {/* Guarantee Section */}
        {
          guarantee && (
            <div
              class:list={[
                'flex gap-4',
                variant === 'centered' ? 'flex-col items-center text-center' : 'items-start',
              ]}
            >
              <div class="shrink-0 w-12 h-12 flex items-center justify-center rounded-full bg-primary/10 text-primary">
                <Icon name={guarantee.icon || 'lucide:shield-check'} class="w-6 h-6" />
              </div>
              <div>
                <h3 class="font-semibold text-text">{guarantee.title}</h3>
                <p class="mt-1 text-sm text-text-muted">{guarantee.description}</p>
              </div>
            </div>
          )
        }

        {/* Security Badges */}
        {
          badges.length > 0 && (
            <div
              class:list={[
                'flex flex-wrap gap-4',
                variant === 'centered' ? 'justify-center' : '',
                !guarantee ? 'md:col-span-2' : '',
              ]}
            >
              {badges.map((badge) => (
                <div class="flex items-center gap-2 text-text-muted">
                  <Icon name={badge.icon} class="w-5 h-5" />
                  <span class="text-sm">{badge.label}</span>
                </div>
              ))}
            </div>
          )
        }

        {/* Payment Methods */}
        {
          paymentMethods.length > 0 && (
            <div
              class:list={[
                variant === 'centered' ? '' : 'md:text-right',
                !guarantee && badges.length === 0 ? 'md:col-span-3' : '',
              ]}
            >
              <p class="text-xs text-text-muted mb-3 uppercase tracking-wide">We accept</p>
              <div
                class:list={[
                  'flex flex-wrap items-center gap-4',
                  variant === 'centered' ? 'justify-center' : 'md:justify-end',
                ]}
              >
                {paymentMethods.map((method) => (
                  <img
                    src={method.logo}
                    alt={method.name}
                    class="h-6 w-auto transition-opacity"
                    loading="lazy"
                  />
                ))}
              </div>
            </div>
          )
        }
      </div>
    </div>
  </div>
</section>
