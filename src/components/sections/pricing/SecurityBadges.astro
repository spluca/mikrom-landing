---
/**
 * SecurityBadges - Security and compliance certifications display
 *
 * @description
 * Displays security certifications, compliance badges, and trust indicators.
 * Essential for enterprise SaaS to build trust with security-conscious customers.
 *
 * @example Basic usage
 * ```astro
 * <SecurityBadges
 *   title="Enterprise-grade security"
 *   badges={[
 *     { name: "SOC 2 Type II", icon: "lucide:shield-check", description: "Audited annually" },
 *     { name: "GDPR", icon: "lucide:lock", description: "EU compliant" },
 *   ]}
 * />
 * ```
 */

import { Icon } from 'astro-icon/components';

interface SecurityBadge {
  /** Badge/certification name */
  name: string;
  /** Icon name (Lucide) or image URL */
  icon?: string;
  /** Image URL (alternative to icon) */
  image?: string;
  /** Short description */
  description?: string;
  /** Link to more info */
  href?: string;
}

interface Props {
  /** Section title */
  title?: string;
  /** Section subtitle */
  subtitle?: string;
  /** Array of security badges */
  badges: SecurityBadge[];
  /** Display variant */
  variant?: 'grid' | 'inline' | 'cards';
  /** Number of columns for grid variant */
  columns?: 3 | 4 | 6;
  /** Section background style */
  background?: 'default' | 'muted' | 'accent';
}

const {
  title,
  subtitle,
  badges,
  variant = 'grid',
  columns = 4,
  background = 'default',
} = Astro.props;

const bgClass = {
  default: 'bg-background',
  muted: 'bg-surface',
  accent: 'bg-primary/5',
}[background];

const columnClass = {
  3: 'grid-cols-1 sm:grid-cols-3',
  4: 'grid-cols-2 sm:grid-cols-4',
  6: 'grid-cols-2 sm:grid-cols-3 lg:grid-cols-6',
}[columns];

const hasHeading = title || subtitle;
---

<section class:list={['py-section', bgClass]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    {
      hasHeading && (
        <div class="text-center mb-12">
          {title && <h2 class="text-2xl sm:text-3xl font-bold text-text">{title}</h2>}
          {subtitle && <p class="mt-4 text-lg text-text-muted max-w-2xl mx-auto">{subtitle}</p>}
        </div>
      )
    }

    {/* Grid Variant - Clean, icon-focused */}
    {
      variant === 'grid' && (
        <div class:list={['grid gap-8', columnClass]}>
          {badges.map((badge) => (
            <div class="flex flex-col items-center text-center group">
              {/* Large icon without background */}
              <div class="text-primary mb-4 group-hover:scale-110 transition-transform">
                {badge.image ? (
                  <img src={badge.image} alt={badge.name} class="w-12 h-12 object-contain" />
                ) : badge.icon ? (
                  <Icon name={badge.icon} class="w-12 h-12" />
                ) : (
                  <Icon name="lucide:shield-check" class="w-12 h-12" />
                )}
              </div>
              <h3 class="font-semibold text-text">{badge.name}</h3>
              {badge.description && (
                <p class="mt-1 text-sm text-text-muted leading-relaxed">{badge.description}</p>
              )}
              {badge.href && (
                <a href={badge.href} class="mt-2 text-sm text-primary hover:underline">
                  Learn more â†’
                </a>
              )}
            </div>
          ))}
        </div>
      )
    }

    {/* Inline Variant - Compact horizontal badges */}
    {
      variant === 'inline' && (
        <div class="flex flex-wrap justify-center gap-3">
          {badges.map((badge) => (
            <div class="inline-flex items-center gap-3 px-4 py-2.5 rounded-lg border-2 border-border/80 bg-surface/50 hover:border-primary hover:bg-primary/5 transition-all">
              <div class="text-primary shrink-0">
                {badge.image ? (
                  <img src={badge.image} alt={badge.name} class="w-5 h-5 object-contain" />
                ) : badge.icon ? (
                  <Icon name={badge.icon} class="w-5 h-5" />
                ) : (
                  <Icon name="lucide:shield-check" class="w-5 h-5" />
                )}
              </div>
              <span class="font-medium text-sm text-text">{badge.name}</span>
            </div>
          ))}
        </div>
      )
    }

    {/* Cards Variant - Detailed with hover effect */}
    {
      variant === 'cards' && (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {badges.map((badge) => (
            <div class="group p-6 rounded-xl border border-border bg-background hover:border-primary/50 hover:shadow-lg transition-all">
              <div class="flex items-start gap-4">
                {/* Icon with subtle background */}
                <div class="shrink-0 w-12 h-12 flex items-center justify-center rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-white transition-colors">
                  {badge.image ? (
                    <img src={badge.image} alt={badge.name} class="w-6 h-6 object-contain" />
                  ) : badge.icon ? (
                    <Icon name={badge.icon} class="w-6 h-6" />
                  ) : (
                    <Icon name="lucide:shield-check" class="w-6 h-6" />
                  )}
                </div>
                <div class="flex-1 min-w-0">
                  <h3 class="font-semibold text-text">{badge.name}</h3>
                  {badge.description && (
                    <p class="mt-1 text-sm text-text-muted leading-relaxed">{badge.description}</p>
                  )}
                  {badge.href && (
                    <a
                      href={badge.href}
                      class="inline-flex items-center gap-1 mt-3 text-sm text-primary hover:underline"
                    >
                      View details
                      <Icon name="lucide:arrow-right" class="w-3 h-3" />
                    </a>
                  )}
                </div>
              </div>
            </div>
          ))}
        </div>
      )
    }
  </div>
</section>
