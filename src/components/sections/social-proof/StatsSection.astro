---
/**
 * StatsSection - Metrics and statistics display
 *
 * @description
 * Displays key metrics/statistics in a responsive grid. Great for
 * social proof and highlighting important numbers.
 *
 * @example Basic usage
 * ```astro
 * <StatsSection
 *   stats={[
 *     { value: "10K+", label: "Customers" },
 *     { value: "99.9%", label: "Uptime" },
 *     { value: "50M+", label: "Requests/day" },
 *   ]}
 * />
 * ```
 *
 * @example With title and description
 * ```astro
 * <StatsSection
 *   title="Trusted by developers worldwide"
 *   stats={[...]}
 *   columns={4}
 * />
 * ```
 */

interface Stat {
  /** The metric value (e.g., "10K+", "99.9%") */
  value: string;
  /** Label describing the metric */
  label: string;
  /** Optional description */
  description?: string;
}

interface Props {
  /** Optional section title */
  title?: string;
  /** Optional section subtitle */
  subtitle?: string;
  /** Array of statistics to display */
  stats: Stat[];
  /** Number of columns */
  columns?: 2 | 3 | 4;
  /** Section background style */
  background?: 'default' | 'muted' | 'accent';
}

const { title, subtitle, stats, columns = 4, background = 'muted' } = Astro.props;

const bgClass = {
  default: 'bg-background',
  muted: 'bg-surface',
  accent: 'bg-primary/5',
}[background];

const columnClass = {
  2: 'grid-cols-2',
  3: 'grid-cols-2 md:grid-cols-3',
  4: 'grid-cols-2 md:grid-cols-4',
}[columns];

const hasHeading = title || subtitle;
---

<section class:list={['py-section', bgClass]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    {
      hasHeading && (
        <div class="text-center mb-12">
          {title && <h2 class="text-2xl sm:text-3xl font-bold text-text">{title}</h2>}
          {subtitle && <p class="mt-4 text-lg text-text-muted">{subtitle}</p>}
        </div>
      )
    }

    <div class:list={['grid gap-8', columnClass]}>
      {
        stats.map((stat) => (
          <div class="text-center">
            <div class="text-4xl sm:text-5xl font-bold text-primary">{stat.value}</div>
            <div class="mt-2 text-text-muted font-medium">{stat.label}</div>
            {stat.description && <p class="mt-1 text-sm text-text-muted">{stat.description}</p>}
          </div>
        ))
      }
    </div>
  </div>
</section>
