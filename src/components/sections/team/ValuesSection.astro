---
/**
 * ValuesSection - Company values or benefits grid
 *
 * @description
 * Displays company values, benefits, or similar content in a card grid.
 * Flexible enough for values, benefits, or any title+description pairs.
 *
 * @example Company values
 * ```astro
 * <ValuesSection
 *   title="Our values"
 *   items={[
 *     { title: "Customer First", description: "..." },
 *     { title: "Move Fast", description: "..." },
 *   ]}
 * />
 * ```
 *
 * @example Benefits with icons
 * ```astro
 * <ValuesSection
 *   title="Why work with us"
 *   items={[
 *     { icon: "lucide:globe", title: "Remote First", description: "..." },
 *     { icon: "lucide:dollar-sign", title: "Competitive Pay", description: "..." },
 *   ]}
 *   variant="with-icon"
 * />
 * ```
 */

import { Icon } from 'astro-icon/components';

interface ValueItem {
  /** Optional icon (Lucide icon name) */
  icon?: string;
  /** Item title */
  title: string;
  /** Item description */
  description: string;
}

interface Props {
  /** Optional section title */
  title?: string;
  /** Optional section subtitle */
  subtitle?: string;
  /** Array of values/benefits */
  items: ValueItem[];
  /** Display variant */
  variant?: 'card' | 'with-icon' | 'simple';
  /** Number of columns */
  columns?: 2 | 3 | 4;
  /** Section background style */
  background?: 'default' | 'muted' | 'accent';
}

const {
  title,
  subtitle,
  items,
  variant = 'card',
  columns = 2,
  background = 'default',
} = Astro.props;

const bgClass = {
  default: 'bg-background',
  muted: 'bg-surface',
  accent: 'bg-primary/5',
}[background];

const columnClass = {
  2: 'grid-cols-1 md:grid-cols-2',
  3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
  4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-4',
}[columns];

const hasHeading = title || subtitle;
---

<section class:list={['py-section', bgClass]}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    {
      hasHeading && (
        <div class="mb-12">
          {title && <h2 class="text-2xl sm:text-3xl font-bold text-text">{title}</h2>}
          {subtitle && <p class="mt-4 text-lg text-text-muted">{subtitle}</p>}
        </div>
      )
    }

    <div class:list={['grid gap-8', columnClass]}>
      {
        items.map((item) => (
          <>
            {/* Card variant */}
            {variant === 'card' && (
              <div class="p-6 rounded-lg border border-border bg-surface">
                <h3 class="text-xl font-semibold text-text">{item.title}</h3>
                <p class="mt-3 text-text-muted leading-relaxed">{item.description}</p>
              </div>
            )}

            {/* With icon variant */}
            {variant === 'with-icon' && (
              <div class="flex gap-4">
                {item.icon && (
                  <div class="flex-shrink-0 w-12 h-12 flex items-center justify-center rounded-lg bg-primary/10 text-primary">
                    <Icon name={item.icon} class="w-6 h-6" />
                  </div>
                )}
                <div>
                  <h3 class="text-lg font-semibold text-text">{item.title}</h3>
                  <p class="mt-2 text-text-muted leading-relaxed">{item.description}</p>
                </div>
              </div>
            )}

            {/* Simple variant */}
            {variant === 'simple' && (
              <div>
                <h3 class="text-lg font-semibold text-text">{item.title}</h3>
                <p class="mt-2 text-text-muted leading-relaxed">{item.description}</p>
              </div>
            )}
          </>
        ))
      }
    </div>
  </div>
</section>
